<html>
<head><title>My Test Extension Options</title></head>
<script type="text/javascript">
  // Saves options to localStorage.
  function save_options() {
    var select = document.getElementById("history_size");
    var historySize = select.children[select.selectedIndex].value;
    localStorage["historySize"] = historySize;
    // Update status to let user know options were saved.
    var status = document.getElementById("status");
    status.innerHTML = "Options Saved.";
    setTimeout(function() {
      status.innerHTML = "";
      }, 750);
  }
  
  // Restores select box state to saved value from localStorage.
  function restore_options() {
    var favorite = localStorage["historySize"];
    if (!favorite) {
      return;
    }
    var select = document.getElementById("history_size");
    for (var i = 0; i < select.children.length; i++) {
      var child = select.children[i];
      if (child.value == favorite) {
        child.selected = "true";
        break;
      }
    }
  }
</script>
<body onload="restore_options()">
Favorite Color:
<select id="history_size">
 <option value="full">full</option>
 <option value="fast">fast</option>
</select>
<br>
<button onclick="save_options()">Save</button>
</body>
</html>
